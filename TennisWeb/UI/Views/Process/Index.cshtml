@model SessionIdDto

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    if (TempData["ResponseMessage"] != null)
    {

        <div class="bg-primary text-white text-center lead">
            @TempData["ResponseMessage"]
        </div>
    }
}

<div id="infoMessage" class="bg-primary text-white text-center lead">...</div>

@section Links{
<link rel="stylesheet" type="text/css" href="~/assets/css/ProcessCard.css" />
<link rel="stylesheet" type="text/css" href="~/assets/css/zoom.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@fancyapps/ui@4.0/dist/fancybox.css" />
@* <link rel="stylesheet" href="~/node_modules/@@fancyapps/ui/dist/fancybox.css" type="text/css" media="screen" /> *@
<link rel="stylesheet" href="~/assets/css/Process/this.css" />
}


<!-- AddProcess_Modal -->
<div id="modal_form_vertical" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Atış Ekleme</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <ul class="nav nav-tabs nav-justified">
                <li class="nav-item"><a href="#basic-justified-tab1" class="nav-link active" data-toggle="tab">Normal
                        Atış Ekle</a></li>
                <li class="nav-item"><a href="#basic-justified-tab2" class="nav-link" data-toggle="tab">Özelleştir</a>
                </li>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="basic-justified-tab1">

                        <form asp-action="Create" asp-controller="Process" method="post">
                            <input type="hidden" value="@Model.SessionId" name="SessionId" />
                            <div class="modal-body">
                                <div class="form-group">
                                    <div class="row">
                                        <input name="Override" value="0" class="form-check-input" type="hidden">
                                    </div>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-link" data-dismiss="modal">Kapat</button>
                                <div class="row">
                                    <button type="submit" class="btn btn-primary">Atış Ekle<i class="icon-paperplane ml-2"></i></button>
                                </div>
                            </div>
                        </form>

                    </div>

                    <div class="tab-pane fade" id="basic-justified-tab2">

                        <form asp-action="Create" asp-controller="Process" method="post">
                            <input type="hidden" value="@Model.SessionId" name="SessionId" />
                            <div class="modal-body">
                                <div class="form-group">
                                    <div class="row">

                                        <div class="form-group">
                                            <label>Video/Stream Seçiniz:</label>
                                            @(await Component.InvokeAsync("SelectListFromTable", new{tableName="AllStream"} ))
                                        </div>

                                        <div class="form-group">
                                            <label>Limit (İşlenecek Frame Sayısı):</label>
                                            <input class="input-group-text" type="number" name="Limit" value="-1"></input>
                                        </div>

                                        <input name="Override" value="1" class="form-check-input" type="hidden">

                                    </div>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-link" data-dismiss="modal">Kapat</button>
                                <div class="row">
                                    <button type="submit" class="btn btn-primary">Atış Ekle<i class="icon-paperplane ml-2"></i></button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
        </div>
    </div>
</div>

<!-- AddProcess_Button -->
<div>
    <td>
        <button type="button" class="btn btn-light" data-toggle="modal" data-target="#modal_form_vertical">
            Atış Ekle <i class="icon-play3 ml-2"></i>
        </button>
    </td>

    <!-- #SESSION PROCESSES -->
    @(await Component.InvokeAsync("ProcessListCard", new{sessionId=@Model.SessionId} ))
</div>

@section Scripts{
<!--Global-->
<script src="~/global_assets/js/demo_pages/components_modals.js"></script>
<script src="~/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/node_modules/@@microsoft/signalr/dist/browser/signalr.js"></script>

<!--Others-->
<script src="https://cdn.jsdelivr.net/npm/@@fancyapps/ui@4.0/dist/fancybox.umd.js"></script> <!--TODO: Fancybox CDN yerine NPM kullanılacak-->
<script src="~/assets/js/Process/MasterSignalR.js"></script>
<script src="~/assets/js/Process/DetailModal.js"></script>
<script src="~/assets/js/Process/DetailCanvasEffect.js"></script>
<script src="~/assets/js/Process/Fancybox.js"></script>

}